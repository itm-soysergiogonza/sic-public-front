<div class="form-group" [formGroup]="formGroup">
  <label [for]="field.name" class="block text-sm font-medium text-gray-700 mb-2 flex items-center">
    <i class="bi" [ngClass]="getFieldIconClass()" style="color: var(--color-primary); margin-right: 0.5rem;"></i>
    {{field.label}}
    @if (field.required) {
      <span class="text-red-500 ml-1">*</span>
    }
  </label>

  <div class="relative">
    @if (field.type === 'TEXT' || field.type === 'EMAIL') {
      <input 
        [type]="getFieldType()" 
        [id]="field.name" 
        [formControlName]="field.name" 
        [placeholder]="field.placeholder || ''"
        class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 hover:border-primary-300">
    }

    @if (field.type === 'NUMBER') {
      <input 
        type="number" 
        [id]="field.name" 
        [formControlName]="field.name" 
        [placeholder]="field.placeholder || ''"
        [min]="field.minValue !== null ? field.minValue : ''"
        [max]="field.maxValue !== null ? field.maxValue : ''"
        class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 hover:border-primary-300">
    }

    @if (field.type === 'DATE') {
      <input 
        type="date" 
        [id]="field.name" 
        [formControlName]="field.name" 
        class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 hover:border-primary-300">
    }

    @if (field.type === 'DATE_RANGE') {
      <div class="flex space-x-2">
        <div class="flex-1">
          <label class="text-xs text-gray-500">Desde</label>
          <input 
            type="date" 
            [id]="field.name + '_start'" 
            [formControlName]="field.name + '_start'" 
            class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 hover:border-primary-300">
        </div>
        <div class="flex-1">
          <label class="text-xs text-gray-500">Hasta</label>
          <input 
            type="date" 
            [id]="field.name + '_end'" 
            [formControlName]="field.name + '_end'" 
            class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 hover:border-primary-300">
        </div>
      </div>
    }

    @if (field.type === 'SELECT' && field.options) {
      <ng-select
        [id]="field.name"
        [formControlName]="field.name"
        [items]="field.options"
        bindLabel="label"
        bindValue="value"
        [placeholder]="field.placeholder || 'Seleccione una opciÃ³n'"
        class="w-full">
      </ng-select>
    }

    @if (formGroup.get(field.name)?.invalid && formGroup.get(field.name)?.touched) {
      <div class="text-red-500 text-sm mt-1 flex items-center">
        <i class="bi bi-exclamation-circle mr-1"></i>
        <span>Este campo es requerido</span>
      </div>
    }
  </div>
</div>
